<template x-if="pantalla=='ReservaUsuarioFinal'">
    <div x-data="ReservaUsuarioFinal()">
        <div class="container">
            <div class="my-3">
                <h3 class="text-center title-principal-css">A continuación tu reserva</h3>
            </div>
            <h4 class="my-2 color-oranged">Gracias. Tu pedido ha sido recibido</h4>
            <div class="row mb-4">
                <div class="col-12 col-sm-6 col-md-3 border-right-dotted d-flex flex-column">
                    <span>NÚMERO DEL PEDIDO:</span>
                    <b x-text="reserva_final.id"></b>
                </div>
                <div class="col-12 col-sm-6 col-md-3 border-right-dotted d-flex flex-column">
                    <span>FECHA:</span>
                    <b class="fecha_end_reserva" x-text="reserva_final.fecha"></b>
                </div>
                <div class="col-12 col-sm-6 col-md-3 border-right-dotted d-flex flex-column">
                    <span>EMAIL:</span>
                    <b x-text="reserva_final?.user_reserva?.email"></b>
                </div>
                <div class="col-12 col-sm-6 col-md-3 border-right-dotted d-flex flex-column">
                    <span>TOTAL:</span>
                    <b x-text="reserva_final.total ? reserva_final.total + '€' : ''">175,00€</b>
                </div>
            </div>

            <div>
                <h6>MÉTODO DE PAGO</h6>
                <h6><b>Transferencia bancaria directa</b></h6>
            </div>
            <div class="">
                <p>Realiza tu pago directamente e nuestra cuenta bancaria. Por favor, usa el número del
                    pedido como
                    referencia de pago,
                    por ejemplo: "Asunto: Reserva <span class="fecha_end_reserva" x-text="reserva_final.fecha">
                    </span>" N° de
                    la reserva". Tu pedido no se
                    procesará hasta
                    que se haya
                    recibido el importe de nuestra cuenta. La fecha en el calendario de reservas será
                    bloqueada
                    hasta las 19 horas
                    del día de mañana, de no ser abonado quedará libre automáticamente, consulta los
                    <a class="color-oranged" href="#">términos y condiciones</a> para más información.
                </p>
            </div>
            <h2><b>CUENTA EXPANSIÓN</b></h2>
            <div class="container">
                <div class="d-flex flex-column justify-content-center align-items-center">
                    <!-- <img src="https://www.portafolio.co/files/article_multimedia/uploads/2022/08/07/62efed37622f3.jpeg" alt="" srcset=""> -->
                    <div>
                        <img class="px-md-5" :src="form_resumen.image_bote" style="width: 100%; height: 16rem;">
                    </div>
                    <div class="container table-responsive mt-5">
                        <table class="table">
                            <tr>
                                <td style="width: 0%;">
                                    <button class="btn btn-transparent color-blue"> <i class="fas fa-ship fa-lg"></i>
                                    </button>
                                </td>
                                <td style="width: 0%;">Barco</td>
                                <td style="width: 30%;">
                                    <strong x-text="reserva_final?.bote?.nombre"></strong>
                                </td>
                                <td class="text-end color-blue" style="width: 75%;">
                                    <b x-text="form_resumen.precio_bote + '€'"></b>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button class="btn btn-transparent color-blue"> <i
                                            class="fas fa-calendar-alt fa-lg"></i>
                                    </button>
                                </td>
                                <td>Fecha</td>
                                <td>
                                    <strong x-text="reserva_final.fecha"></strong>
                                </td>
                                <td class="text-end color-blue" style="width: 75%;">
                                    <!-- <b>41€</b> -->
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button class="btn btn-transparent color-blue"> <i class="fas fa-clock fa-lg"></i>
                                    </button>
                                </td>
                                <td>Salida</td>
                                <td>
                                    <div class="d-flex">
                                        <strong class="me-5" x-text="form_resumen.hora_inicio"></strong>
                                        <span class="me-5">Regreso</span>
                                        <strong x-text="form_resumen.hora_fin">Regreso</strong>
                                    </div>
                                </td>
                                <td class="text-end color-blue" style="width: 75%;">
                                    <b x-text="precio_horas_extra + '€'"></b>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button class="btn btn-transparent color-blue"> <i
                                            class="fas fa-dharmachakra fa-lg"></i>
                                    </button>
                                </td>
                                <td>Responsable</td>
                                <td>
                                    <strong x-text="form_resumen.responsable"></strong>
                                </td>
                                <td class="text-end color-blue" style="width: 75%;">
                                    <!-- <b>41€</b> -->
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button class="btn btn-transparent color-blue"> <i class="fas fa-users fa-lg"></i>
                                    </button>
                                </td>
                                <td>Asistentes</td>
                                <td>
                                    <strong x-text="asistentes()"></strong>
                                </td>
                                <td class="text-end color-blue" style="width: 75%;">
                                    <!-- <b>41€</b> -->
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button class="btn btn-transparent color-blue"> <i
                                            class="fas fa-briefcase fa-lg"></i>
                                    </button>
                                </td>
                                <td>Extras</td>
                                <td>
                                    <strong x-text="extras_text()"></strong>
                                </td>
                                <td class="text-end color-blue" style="width: 75%;">
                                    <b x-text="total_extras + '€'"></b>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button class="btn btn-transparent color-blue"> <i
                                            class="fas fa-credit-card fa-lg"></i>
                                    </button>
                                </td>
                                <td>Pago</td>
                                <td>Normal</td>
                                <td class="text-end color-blue" style="width: 75%;">
                                    <b>0€</b>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                </td>
                                <td></td>
                                <td></td>
                                <td class="text-end color-blue" style="width: 75%;">
                                    <b x-text="'Total: ' + form_resumen.total + '€'"></b>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row mb-5 justify-content-evenly">
                <button class="btn btn-resume col-12 col-md-6 col-lg-6 col-xl-2 mb-3 mx-1"> <span class="f-7">Descargar
                        Recibo</span> <i class="fas fa-file-pdf"></i></button>
                <button class="btn btn-resume col-12 col-md-6 col-lg-6 col-xl-2 mb-3 mx-1"> <span class="f-7">Compartir
                        esta Reserva</span> <i class="fas fa-file-pdf"></i></button>
                <button class="btn btn-resume col-12 col-md-6 col-lg-6 col-xl-2 mb-3 mx-1"> <span class="f-7">Descargar
                        el contrato</span> <i class="fas fa-share-alt"></i></button>
                <button class="btn btn-instuctivo-pdf col-12 col-md-6 col-lg-4 col-xl-4 mb-3 mx-1"> <span
                        class="f-7">Descargar Instructivo de esta embarcación</span> <i
                        class="fas fa-file-pdf"></i></button>
            </div>
            <div class="text-center mb-4">
                <h5>
                    <strong>Gracias por preferir a MBM - Disfruta tu paseo!</strong>
                </h5>
            </div>
        </div>
    </div>
</template>

<script>
    function ReservaUsuarioFinal() {
        return {
            reserva_final: {},
            total_extras: 0,
            init() {
                this.loading = true
                let url = this.base_url + '/reserva/resume_reserva_final'
                axios.post(url, { id: this.form_reserva.id }).then(res => {
                    this.reserva_final = res.data
                    this.loading = false
                })
            },
            asistentes() {
                return this.form_resumen.cant_adultos + ' adultos + ' + this.form_resumen.cant_ninios + ' niños'
            },
            extras_text() {
                let message = ''
                this.form_resumen.extras.forEach(i => {
                    message += i.nombre + ' ' + i.descripcion + ' x ' + i.cantidad + ' '
                    this.total_extras += parseInt(i.precio)
                });
                return message
            },
        }
    }
</script>